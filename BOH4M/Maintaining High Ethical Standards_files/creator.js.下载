import"./plugins3.js";import{l as t,g as e,a as o,b as r}from"./utils.js";import{a}from"./feature-flags.js";import{g as n}from"./lang-terms.js";import{i,B as s,x as l}from"./lit-element.js";import{e as c}from"./_rollupPluginBabelHelpers.js";import{E as d}from"./index7.js";import{g as u}from"./lazy-instantiator.js";import{t as p}from"./plugins.js";import"./colors.js";import"./icon.js";import"./typography.js";import{D as f}from"./d2l-practice.js";import"./icon-styles.js";import"./directive.js";import"./rtl-mixin.js";import"./common.js";import"./dedupeMixin.js";import"./unsafe-svg.js";import"./async-directive.js";import"./styles.js";import"./localize-mixin.js";import"./core.js";import"./index3.js";import"./if-defined.js";const y=t.debug("error-handler");y("Loading error-handler module.");const m=new Map([]);const g=[{oldName:"--primary",newName:"--d2l-cplus-color-primary"},{oldName:"--primary-dark",newName:"--d2l-cplus-color-primary-dark"},{oldName:"--neutral-one-head",newName:"--d2l-cplus-color-neutral-one-head"},{oldName:"--font-family-one",newName:"--d2l-cplus-font-family-one"}];const b=t.debug("setup:accordions");function h(t,e){try{if(!t)return b("setupAccordion did not receive an accordion.");if(1!==t.nodeType)return b("the received accordion is not a DOM element.");const o=document.createElement("d2l-cplus-accordion"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instructions=n?n.textContent:"";const i=t.querySelectorAll(".card"),s=[];for(const[t,e]of i.entries()){const o={id:t},r=e.querySelector(".card-title");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".card-body");o.content=a&&a.innerHTML?a.innerHTML:"",s.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){b("setupAccordion failed to create an element.",t)}}b("Loading accordions module.");const w=t.debug("setup:callouts");function v(t,e){w("Starting setupCalloutComponent.");try{if(!t)return w("setupCalloutComponent did not receive a callout element.");if(1!==t.nodeType)return w("the received callout element is not a DOM element.");const o=document.createElement("d2l-cplus-callout"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector(".card-text >*:nth-child(2), .jumbotron >*:nth-child(2)");o.dataset.content=JSON.stringify(n&&n.innerHTML?n.innerHTML:"");const i=t.querySelector(".card-text >*:first-child, .jumbotron >*:first-child");i.style.textTransform="none",o.dataset.title=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){w("setupCalloutComponent failed to create an element.",t)}}w("Loading callouts module.");const S=t.debug("setup:click-to-reveals");function x(t,e){S("Starting setupClickToRevealComponent.");try{if(!t)return S("setupClickToRevealComponent did not receive a click to reveal element.");if(1!==t.nodeType)return S("the received click to reveal element is not a DOM element.");const o=document.createElement("d2l-cplus-click-to-reveal"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector("button"),i=n?n.textContent:"";o.dataset.buttonRevealLabel=i.split("||").shift(),o.dataset.buttonHideLabel=i.split("||").pop();const s=t.querySelector(".card-text > p:first-of-type");o.dataset.introText=s?s.textContent:"";const l=t.querySelector(".card-text > p.instruction");o.dataset.instructions=l?l.textContent:"";const c=t.querySelector(".card-text > .collapse > div"),d=c&&c.innerHTML?c.innerHTML:"";o.dataset.revealedContent=JSON.stringify(d),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){S("setupClickToRevealComponent failed to create an element.",t)}}S("Loading click-to-reveals module.");const C=t.debug("setup:carousel");async function A(t,e){try{if(!t)return C("setupCarousel did not receive a carousel.");if(1!==t.nodeType)return C("the received carousel is not a DOM element.");const o=document.createElement("d2l-cplus-carousel"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyId=a?a.getAttribute("aria-describedby"):"",r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instruction=n?n.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const i=t.querySelectorAll(".d2l-cplus-carousel-slide"),s=[];for(const[t,e]of i.entries()){const o={id:t},r=e.querySelector(".d2l-cplus-carousel-slide-title");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".d2l-cplus-carousel-slide-image");if(a){const t=a.getAttribute("src"),e=a.getAttribute("alt");if(!t)return C("Could not find src attribute on image tag.");if("string"!=typeof t)return C("Value of src attribute was not a string.");o.image=t,o.alt=e||""}else o.image="",o.alt="";const n=e.querySelector(".d2l-cplus-carousel-slide-text");o.text=n&&n.innerHTML?n.innerHTML:"",s.push(o)}o.dataset.slides=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){C("setupCarousel failed to create an element.",t)}}C("Loading carousel module.");const N=t.debug("setup:flipcards");function L(t,e){N("Starting setupFlipcardsComponent.");try{if(!t)return N("setupFlipcardsComponent did not receive a flipcards element.");if(1!==t.nodeType)return N("the received flipcards element is not a DOM element.");const o=document.createElement("d2l-cplus-flipcards"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e;const n=t.parentNode.querySelector(".instruction");o.dataset.instructions=n?n.textContent:"",o.dataset.maxcards=t.getAttribute("data-maxcards");const i=t.querySelectorAll(".d2l-flip-card"),s=[];for(const t of i){const e=t.style.gridRowStart-1,o={},r=t.querySelector('.d2l-flip-card-front-body > *[data-flipcardprop*="frontCardTitle"]');o.frontTitle=r?r.textContent.trim():"";const a=t.querySelector(".d2l-flip-card-front-body p");o.frontText=a?a.textContent.trim():"";const n=t.querySelector(".d2l-flip-card-front img");o.frontImage={url:n?n.getAttribute("src"):"",alt:n?n.getAttribute("alt"):""};const i=t.querySelector('.d2l-flip-card-back-body > *[data-flipcardprop*="backCardTitle"]');o.backTitle=i?i.textContent.trim():"";const l=t.querySelector(".d2l-flip-card-back-body p");o.backText=l?l.textContent.trim():"";const c=t.querySelector(".d2l-flip-card-back img");o.backImage={url:c?c.getAttribute("src"):"",alt:c?c.getAttribute("alt"):""},s[e]||(s[e]=[]),s[e]=[...s[e],o]}o.dataset.rows=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){N("setupFlipcardsComponent failed to create an element.",t)}}N("Loading flipcards module.");const T=t.debug("setup:hotspots");T("Loading hotspots module.");const q=t.debug("module");function D(t,e){q("Starting processStylizedQuoteComponent.");try{if(!t)return q("setupStylizedQuoteComponent did not receive a stylized quote element.");if(1!==t.nodeType)return q("the received stylized quote element is not a DOM element.");const o=document.createElement("d2l-cplus-stylized-quote"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby");const a=t.parentNode.querySelector(".sr-only");r.srOnlyInnerText=a?a.textContent:"",o.dataset.wrapperData=JSON.stringify(r),o.style.display="block",o.dataset.id=e,o.dataset.type=t.parentNode.getAttribute("data-type");const n=t.querySelector("blockquote > p");o.dataset.quotation=n&&n.textContent?n.textContent:"";const i=t.querySelector("blockquote > footer");o.dataset.attribution=i&&i.textContent?i.textContent:"",o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){q("setupStylizedQuoteComponent failed to create an element.",t)}}q("Loading quotes module.");const j=t.debug("setup:tabs");async function O(t,e){try{if(!t)return j("setupTabsWrapper did not receive a tabsWrapper.");if(1!==t.nodeType)return j("the received tabsWrapper is not a DOM element.");const o=document.createElement("d2l-cplus-tabs-container"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.parentNode.querySelector(".instruction");o.dataset.instruction=a?a.textContent:"",t.parentNode.querySelector(".instruction").innerHTML="";const n=t.querySelectorAll(".list-group-item"),i=t.querySelectorAll(".tab-pane"),s=[];for(let t=0;t<n.length;t++){const o={id:e};let r=n[t].querySelectorAll('span[data-itemprop$="0"]')[0];if(!r&&n[t].hasAttribute("data-itemprop")){const e=n[t].getAttribute("data-itemprop");"0"===e.substr(e.length-1)&&(r=n[t])}o.title=r&&r.textContent?r.textContent:"";const a=n[t].querySelectorAll("img")[0];o.imageSrc=a&&a.getAttribute("src")?a.getAttribute("src"):"",o.imageAlt=a&&a.getAttribute("alt")?a.getAttribute("alt"):"",o.content=i[t]&&i[t].innerHTML&&""!==i[t].innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?i[t].innerHTML:"",s.push(o)}o.dataset.type=r.dataType,o.dataset.tabsData=JSON.stringify(s),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){j("setupTabsWrapper failed to create an element.",t)}}j("Loading tabs module.");const k=t.debug("setup:timelines");async function I(t,e){try{if(!t)return k("setupTimeline did not receive a timeline.");if(1!==t.nodeType)return k("the received timeline is not a DOM element.");const o=document.createElement("d2l-cplus-timeline"),r={};r.dataIdx=t.parentNode.getAttribute("data-idx"),r.dataType=t.parentNode.getAttribute("data-type"),r.role=t.parentNode.getAttribute("role"),r.ariaDescribedby=t.parentNode.getAttribute("aria-describedby"),o.dataset.wrapperData=JSON.stringify(r),o.dataset.id=e;const a=t.querySelectorAll(".timeline-panel"),n=[];for(const[t,e]of a.entries()){const o={id:t},r=e.querySelector(".timeline-heading");o.title=r&&r.textContent?r.textContent:"";const a=e.querySelector(".timeline-body > [data-itemprop]");o.content=a&&a.innerHTML&&""!==a.innerHTML.replace(/(<p[^>]+?>|<p>|<\/p>)/gi,"").trim()?a.innerHTML:"",n.push(o)}o.dataset.type=r.dataType,o.dataset.panels=JSON.stringify(n),o.setAttribute("data-rs-shadow-root",!0),t.parentNode.after(o),t.parentNode.remove()}catch(t){k("setupTimeline failed to create an element.",t)}}k("Loading timelines module.");const M=t.debug("elements");M("Loading elements module."),function(){const t=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-400.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(t),t.load();const e=new FontFace("Lato","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/Lato-700.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(e),e.load();const o=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Light.woff) format(woff)",{style:"normal",weight:"300"});document.fonts.add(o),o.load();const r=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Regular.woff) format(woff)",{style:"normal",weight:"400"});document.fonts.add(r),r.load();const a=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Bold.woff) format(woff)",{style:"normal",weight:"700"});document.fonts.add(a),a.load();const n=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-LightItalic.woff) format(woff)",{style:"italic",weight:"300"});document.fonts.add(n),n.load();const i=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-Italic.woff) format(woff)",{style:"italic",weight:"400"});document.fonts.add(i),i.load();const s=new FontFace("BC Sans","url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff2) format(woff2), url(https://s.brightspace.com/lib/fonts/0.6.1/assets/BCSans-BoldItalic.woff) format(woff)",{style:"italic",weight:"700"});document.fonts.add(s),s.load()}();let F;const H=i(F||(F=(t=>t)`.d2l-cplus-layout{container-name:d2l-cplus-layout;container-type:inline-size;display:grid;grid-template-rows:auto;margin-block:0;margin-inline:calc(var(--d2l-cplus-size-base, 18px)*-1);min-height:30px;width:calc(100% + 2*var(--d2l-cplus-size-base, 18px))}.d2l-cplus-layout::after{clear:both;content:" ";display:block;height:0;visibility:hidden}.d2l-cplus-layout-column{padding-block:0;padding-inline:var(--d2l-cplus-size-base, 18px);word-wrap:break-word}.d2l-cplus-layout-half{grid-template-columns:repeat(2, 50%)}.d2l-cplus-layout-thirds{grid-template-columns:repeat(3, minmax(33%, 1fr))}.d2l-cplus-layout-one-third{grid-template-columns:minmax(33%, 1fr) minmax(66%, 1fr)}.d2l-cplus-layout-two-third{grid-template-columns:minmax(66%, 2fr) minmax(33%, 1fr)}.d2l-cplus-layout iframe{max-width:100%}@container d2l-cplus-layout (width <= 822px){.d2l-cplus-layout-column{padding-inline:var(--d2l-cplus-size-small-1, 12px)}.d2l-cplus-layout-column:first-of-type{padding-inline-start:var(--d2l-cplus-size-base, 18px)}.d2l-cplus-layout-column:last-of-type{padding-inline-end:var(--d2l-cplus-size-base, 18px)}}@container d2l-cplus-layout (width <= 546px){.d2l-cplus-layout-column{grid-column:1/-1;padding-inline:var(--d2l-cplus-size-base, 18px)}}
`)),B=t.debug("setup:layouts");async function P(t){B("Starting setupLayouts.");try{if(!t||t.length<1)return B("setupLayouts found no layouts.");for(const e of t)e.style.opacity=0;!function(){try{B("Stating addStyles.");const t=document.createElement("style");t.innerHTML=H.cssText,document.head.appendChild(t)}catch(t){B("addStyle failed unexpectedly.",t)}}()}catch(t){B("setupLayouts failed unexpectedly",t)}finally{for(const e of t)e.style.opacity=1}}B("Loading layouts module.");const E=t.debug("layouts");E("Loading layouts module.");const z=async function(t,e,o){const r={headers:{Authorization:`Bearer ${e}`}};try{const e=t.getLinkByRel("https://activity.api.brightspace.com/rels/assigned-activities");if(!e)return{};const n=new d(await(await fetch(e.href,r)).json()),i=n.getActionByName("create-assigned-activity");if(n.entities||(o=!0),i&&o){var a;const t={};i.fields.forEach((e=>{e.value&&(t[e.name]=e.value)}));const o=(await fetch(i.href,c({method:i.method,body:new URLSearchParams(t),headers:{"Content-Type":null!==(a=i.type)&&void 0!==a?a:"application/x-www-form-urlencoded;charset=UTF-8"}},r))).headers.get("Content-Location");return{attempt:new d(await(await fetch(o,r)).json()),assignedActivitiesList:e}}if(n.entities&&n.entities.length>0){return{attempt:new d(await(await fetch(n.entities[0].href,r)).json()),assignedActivitiesList:e}}}catch(t){return{}}};let J,U,R=t=>t;customElements.define("d2l-practice-error",class extends f{static get styles(){return i(J||(J=R`
		:host {
			all: initial;
			color: #494c4e;
			display: inline-block;
			font-family: "Lato", sans-serif;
			font-size: 0.8rem;
			line-height: 1.5;
			overflow: hidden;
			width: 100%;
		}

		:host([hidden]) {
			display: none;
		}

		.d2l-error-contain {
			align-items: center;
			background-color: var(--d2l-color-celestine-plus-2);
			border: 1px solid var(--d2l-color-mica);
			border-radius: 6px;
			display: flex;
			flex-direction: column;
			justify-content: center;
			overflow: hidden;
			padding: 18px;
		}

		d2l-icon {
			margin-top: 0.83em;
		}`))}render(){return l(U||(U=R`
			<div class="d2l-error-contain">
				<d2l-icon icon="tier3:alert"></d2l-icon>
				<h2>${0}</h2>
			</div>
		`),this.localize("practice:learner:general:errorLoadingPractice"))}});const $=t.debug("practices");$("Loading practices.js"),window.D2L=window.D2L||{},window.D2L.Creator={convertElements:async function(t,o,r,i="False"){var s;if(M("Starting convertElements",i),JSON.parse(i.toLowerCase())&&t&&!(t.length<1)){var l;if(document.querySelector("html").setAttribute("data-mathjax-context",JSON.stringify({outputScale:1.5})),null!==(s=window)&&void 0!==s&&null!==(s=s.D2L)&&void 0!==s&&s.Pulse)o=null===(l=window)||void 0===l||null===(l=l.D2L)||void 0===l||null===(l=l.Pulse)||void 0===l?void 0:l.orgUnitId,r=await e(o);window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:o,OrgUnitPath:r},window.D2L.Creator.Flags=window.D2L.Creator.Flags||{},window.D2L.Creator.Flags.Elements=function(){let t;try{return t=a(m),t}catch(t){return m}}(),y("Registering error handler."),window.addEventListener("error",(t=>{y(`CPlusError: ${t.type}: ${t.message}`),t.stopPropagation(),t.preventDefault()})),function(){for(const t of g){const e=getComputedStyle(document.documentElement).getPropertyValue(t.oldName);e&&document.documentElement.style.setProperty(t.newName,e)}}(),async function(){j("Starting setupTabs.");const t=document.querySelectorAll(".d2l-element > .tabs-wrapper");if(!t||t.length<1)return j("setupTabs found no tabs.");try{for(const e of t)e.parentNode.style.opacity=0;await import("./tabs.js");for(const[e,o]of t.entries())O(o,e)}catch(t){j("setupTabs failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element:not(.d2l-tabccordion) > .accordion");if(!t||t.length<1)return b("setupAccordions found no accordions.");for(const e of t)e.parentNode.style.opacity=0;await import("./accordion.js");for(const[e,o]of t.entries())h(o,e)}catch(t){b("setupAccordions failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-element > .card.card-reveal");if(!t||t.length<1)return S("setupCardReveals found no click to reveals");for(const e of t)e.parentNode.style.opacity=0;await import("./click-to-reveal.js");for(const[e,o]of t.entries())x(o,e)}catch(t){S("setupCardReveals failed unexpectedly",t)}}(),async function(){try{const t=document.querySelectorAll(".d2l-flip-card-wrapper");if(!t||t.length<1)return N("setupFlipcards found no flipcards");for(const e of t)e.parentNode.style.opacity=0;await import("./flipcards.js");for(const[e,o]of t.entries())L(o,e)}catch(t){N("setupFlipcards failed unexpectedly",t)}}(),async function(){const t=document.querySelectorAll(".d2l-element > .card:not(.card-reveal), .d2l-element > .jumbotron");try{if(!t||t.length<1)return w("setupCallouts found no callouts");for(const e of t)e.parentNode.style.opacity=0;await import("./callout.js");for(const[e,o]of t.entries())v(o,e)}catch(t){w("setupCallouts failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){k("Starting setupTimelines.");const t=document.querySelectorAll(".d2l-element .timeline");if(!t||t.length<1)return k("setupTimelines found no timelines.");try{for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./timeline.js");for(const[e,o]of t.entries())I(o,e)}catch(t){k("setupTimelines failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-timeline");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){T("Starting setupHotspots.");const t=document.querySelectorAll(".d2l-hotspot");try{const e=document.querySelector("html").hasAttribute("lang")?document.querySelector("html").getAttribute("lang"):"en-us",o=await n(e);if(o||T("Unable to get language terms."),"object"!=typeof o&&T("Unexpected value for langTerms object."),!t||t.length<1)return T("setupHotspots found no containers.");for(const e of t)e.parentNode.style.opacity=0;await import("./hotspot.js");for(const e of t)try{if(!e.getAttribute("data-properties"))return T("Could not find necessary data for the interactive.");const t={},r=e.closest(".d2l-element");t.dataIdx=r.getAttribute("data-idx"),t.dataType=r.getAttribute("data-type"),t.role=r.getAttribute("role"),t.ariaDescribedby=r.getAttribute("aria-describedby");const a=r.querySelector(".sr-only");t.srOnlyId=a?a.getAttribute("id"):"",t.srOnlyInnerText=a?a.textContent:"";const n=e.querySelector("img");if(!n)return T("Could not find required image tag.");const i=n.getAttribute("src");if(!i)return T("Could not find src attribute on image tag.");if("string"!=typeof i)return T("Value of src attribute was not a string.");let s;try{s=decodeURIComponent(window.atob(e.getAttribute("data-properties")))}catch(t){T("setupHotspots failed to decode string.",t),s=window.atob(e.getAttribute("data-properties"))}if("string"!=typeof s)return T("Value of data-properties attribute was not a string.");const l=document.createElement("d2l-cplus-hotspot");l.dataset.activity=s,l.dataset.image=i,l.dataset.langTerms=JSON.stringify(o),l.dataset.wrapper=JSON.stringify(t),l.setAttribute("data-rs-shadow-root",!0),e.parentNode.after(l),e.parentNode.remove()}catch(t){T("setupHotspots failed to create an element.",t)}}catch(t){T("setupHotspots failed unexpectedly",t)}finally{for(const e of t)e.parentNode.style.opacity=1}}(),async function(){try{const t=document.querySelectorAll(".d2l-cplus-carousel");if(!t||t.length<1)return C("setupCarousels found no carousels.");for(const e of t)e.parentNode.parentNode.style.opacity=0;await import("./carousel.js");for(const[e,o]of t.entries())A(o,e)}catch(t){C("setupCarousels failed unexpectedly",t)}finally{const t=document.querySelectorAll("d2l-cplus-carousel");for(const e of t)e.parentNode.style.opacity=1}}(),async function(){const t=document.querySelectorAll(".d2l-element > .blockquote");try{if(!t||t.length<1)return q("setupStylizedQuotes found no stylized quotes");for(const e of t)e.parentNode.style.opacity=0;await import("./stylized-quote.js");for(const[e,o]of t.entries())D(o,e)}catch(t){q("setupStylizedQuotes failed unexpectedly",t)}}()}},convertLayouts:function(t){E("Starting convertLayouts"),P(t)},convertPractices:async function(t,a,n){var i,s;if($("Starting convertPractices."),!t||t.length<1)return;null!==(i=window)&&void 0!==i&&null!==(i=i.D2L)&&void 0!==i&&i.Pulse&&(a=null===(s=window)||void 0===s||null===(s=s.D2L)||void 0===s||null===(s=s.Pulse)||void 0===s?void 0:s.orgUnitId,n=await e(a)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:a,OrgUnitPath:n};const l=[];for(let e=0;e<t.length;e++){const o=t[e].querySelector("iframe[data-file]");if(o){const t=o.src||o.getAttribute("data-src"),e=new URLSearchParams(t).get("t");if(e){if(o.setAttribute("data-type",e),l.includes(e))continue;l.push(parseInt(e))}o.setAttribute("data-src",o.src),o.removeAttribute("src"),o.style.height=0}}for(const t of l){const e=document.querySelectorAll(`.d2l-practice iframe[data-type="${t}"]`);if(await o(t))for(const o of e){let e=o.getAttribute("data-file");if(e){e.includes("practice/")||(e=`practice/${e}`);try{const a=await fetch(`${window.D2L.Creator.Context.OrgUnitPath}${e}`).then((t=>t.json())),n=r(t),i=document.createElement(n);o.parentNode.appendChild(i),i.practiceData=a,i.setAttribute("data-rs-shadow-root",!0),o.remove()}catch(a){try{const a=await fetch(`${e}`).then((t=>t.json())),n=r(t),i=document.createElement(n);o.parentNode.appendChild(i),i.practiceData=a,i.setAttribute("data-rs-shadow-root",!0),i.setAttribute("practice-lor",""),o.remove()}catch(t){const e=document.createElement("d2l-practice-error");o.replaceWith(e)}}}}else for(const t of e)t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src"),t.style.height="auto"}},convertPracticeActivities:async function(o,r,a,n=!1){var i;const l=t.debug("practices-activities");if(l("Starting convertPracticeActivities."),!o||o.length<1)return;l(`convertPracticeActivities is converting ${o.length} Practice(s).`),o.forEach((t=>{const e=t.querySelector("iframe[data-file]");e&&(e.setAttribute("data-src",e.src),e.removeAttribute("src"),e.style.height=0)}));const c=p("practices-activity-display","registry");let f;c&&await c.getModule();const y=p("practices-activity-display","provider-framework-utils");var m;let g;y&&(f=await y.getModule()),null!==(i=window)&&void 0!==i&&null!==(i=i.D2L)&&void 0!==i&&i.Pulse&&(r=null===(m=window)||void 0===m||null===(m=m.D2L)||void 0===m||null===(m=m.Pulse)||void 0===m?void 0:m.orgUnitId,a=await e(r)),window.D2L.Creator.Context=window.D2L.Creator.Context||{},window.D2L.Creator.Context={OrgUnitId:r,OrgUnitPath:a};let b=!1;for(const t of o){const e=t.attributes["data-d2l-activity-href"].value,o=t.innerHTML,r=t.querySelector("iframe[data-file]");r&&r.remove();try{const r=`${e.split("?").shift()}?ou=${window.D2L.Creator.Context.OrgUnitId}`,a=d(await(await window.top.d2lfetch.fetch(`${r}`)).json());void 0===g&&(g=localStorage["D2L.Fetch.Tokens"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"]&&JSON.parse(localStorage["D2L.Fetch.Tokens"])["*:*:*"].access_token||void 0);let i=a;const l=await u(a,g,window.D2L.Creator.Context.OrgUnitId);if(l){const t=await z(l,g,n);i=t&&t.attempt||i}const c=await f(i.links,{type:"practice-activity",token:g});if(void 0===c)b=!0,t.innerHTML=o;else{var h;const e=c&&(null!==(h=c.contentDoing)&&void 0!==h?h:c.contentPrimary)||null;e?s(e,t):(b=!0,t.innerHTML=o)}}catch(e){b=!0,t.innerHTML=o}}if(b){const t=document.querySelectorAll(".d2l-practice");window.D2L.Creator.convertPractices(t,r,a)}},wrapTables:function(t){if(t&&!(t.length<1))for(const e of t){const t=document.createElement("div"),o=e.parentNode;o.classList.contains("table-responsive")||(t.classList.add("table-wrapper"),o.insertBefore(t,e),t.appendChild(e))}}};
